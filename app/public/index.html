<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>CodeApprove</title>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but CodeApprove doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
    <script>
      // ===================================
      // TODO: Remove this script from main
      // ===================================

      function median(values){
        values.sort((a, b) => a - b);
        var half = Math.floor(values.length / 2);

        if (values.length % 2) {
          return values[half];
        }
        return (values[half - 1] + values[half]) / 2.0;
      }

      function perfSummary(measureName) {
          const perf = performance.getEntriesByName(measureName);
          const durs = perf.map(x => x.duration);
          const count = durs.length;
          const total = durs.reduce((acc, curr) => acc + curr, 0).toFixed(2);

          return {
            name: measureName,
            count,
            total,
            median: median(durs).toFixed(2),
            max: Math.max(...durs).toFixed(2)
          }
      }

      function componentPerf(component) {
        console.log(perfSummary("vue <" + component + "> init"));
        console.log(perfSummary("vue <" + component + "> render"));
        console.log(perfSummary("vue <" + component + "> patch"));
      }
    </script>
  </body>
</html>
